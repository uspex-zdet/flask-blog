{% extends "base.html" %}

{% block content %}
<div class="register_form">

    <form action="" method="POST">

        {{ form_registration.hidden_tag() }}
            <legend class="legend">{{ legend }}</legend>

                {% if form_registration.username.errors %}
                {{ form_registration.username(class='form-post-title is-invalid', placeholder='username') }}
                <div class="invalid-feedback">
                    {%  for errors in form_registration.username.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>
                {% else %}
                    {{ form_registration.username(class='form-post-title', placeholder='username') }}
                {% endif %}

                {% if form_registration.email.errors %}
                {{ form_registration.email(class='form-post-title is-invalid', placeholder='email') }}
                <div class="invalid-feedback">
                    {%  for errors in form_registration.email.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>
                {% else %}
                    {{ form_registration.email(class='form-post-title', placeholder='email') }}
                {% endif %}

                {% if form_registration.password.errors %}
                {{ form_registration.password(class='form-post-title is-invalid', placeholder='password') }}
                <div class="invalid-feedback">
                    {%  for errors in form_registration.password.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>
                {% else %}
                    {{ form_registration.password(class='form-post-title', placeholder='password') }}
                {% endif %}

                {% if form_registration.confirm_password.errors %}
                {{ form_registration.confirm_password(class='form-post-title is-invalid', placeholder='confirm password') }}
                <div class="invalid-feedback">
                    {%  for errors in form_registration.confirm_password.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>
                {% else %}
                    {{ form_registration.confirm_password(class='form-post-title', placeholder='confirm password') }}
                {% endif %}

                {{ form_registration.role() }}

                <div class="form-group">
                    {{ form_registration.submit(class='btn_2') }}
{#                {% if form.is_submitted() and form.errors|count > 0 %}#}
{#                <div class="alert alert-danger alert-dismissible fade show" role="alert">#}
{#                    {{ form.errors|count }} error(s):#}
{#                    {% for field_name, field_errors in form.errors|dictsort if field_errors %}#}
{#                        {% for error in field_errors %}#}
{#                            <li>{{ form[field_name].label }}: {{ error }}</li>#}
{#                        {% endfor %}#}
{#                    {% endfor %}#}
{#                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>#}
{#                </div>#}
{#                  {% endif %}#}
            </div>
    </form>
</div>

<div class="border-top">
    <small class='text-muted'>
        Already have an account?<a class="ml-2" href="{{ url_for('users.login') }}">Login</a>
    </small>
</div>

{% endblock content %}